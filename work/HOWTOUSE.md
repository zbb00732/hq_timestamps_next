# timestamp.exe ：Hellish Quartの対戦動画(NHK)のタイムスタンプを出力するツール
## ■概要
Hellish Quartの対戦動画から、NHK非主流派Youtubeチャンネルの概要欄に記載するタイムスタンプを出力するツールです。

## ■前提条件
### 動画ファイル
- 動画の形式
  mp4、mkv など、OpenCVライブラリが対応している形式に対応。

- 動画の解像度
  アスペクト比 16:9 の動画に対応。

- フレームレート
  60fps、30fps など、視聴可能な範囲のフレームレートに対応。

### 動画の内容
- フラッグ数
  1〜7フラッグ先取に対応。8フラッグ以上は非対応（表示形式が異なるため）。

- 試合成立条件
  左右どちらかが最大フラッグ数に到達した場合を試合成立とみなし、タイムスタンプに出力します（例：5/5）。
  到達前にメニューに戻った場合などは試合としてカウントしません。

- リマッチ対応
  リマッチにも対応しています。

- オーバーレイ表示などの注意
  以下の画面情報を元に試合情報を検出します：
  -- キャラクター選択画面の顔画像左側の縦帯
  -- キャラクター名の表示（青・黄色の文字）
  -- 試合画面のフラッグ表示（画面上部左右）

  これらにオーバーレイや Parsec のアイコンなどが重なると、正しく検出できない場合があります。


- 編集された動画について
  このツールでは、「最後にキャラクター選択画面が表示されていた状態」を元に、試合のキャラクター情報を抽出しています。
  そのため、試合前のキャラクター選択画面がカットされていると、キャラクター情報を正しく取得できない可能性があります。

## ■使い方
 1. アプリ(timestamp.exe)を起動します。
 2. 対戦動画を選択します。
 3. コンソールおよび進捗バーが表示されます。
 4. 処理が終了すると timestamp.exe があるフォルダに下記のファイルが出力されます。
　　（日付）timestamps.txt  …タイムスタンプ
　　（日付）statistics.txt  …処理結果統計情報
　処理中にCANCELで中断した場合は何も出力されません。

## ■注意事項
- matchtemplate フォルダ、および `name_l`、`name_r` フォルダ内の画像は削除しないでください。
- キャラクターの名前画像が無い場合、その試合のキャラクター名は nomatch として出力されます。
  名前画像を追加後、再度ツールを実行するか、人間が目視で修正してください。

